<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- allow web app mode on iOS -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Workshec">

<!-- icon for homescreen -->
<link rel="apple-touch-icon" href="icon.png">
    <title>work rota</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .header p {
            color: #718096;
            font-size: 1.1rem;
        }

        .shift-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .shift-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .shift-card.completed {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border-color: #28a745;
        }

        .shift-card.active {
            background: linear-gradient(135deg, #7c6825 0%, #634f0e 100%);
            border-color: #ffc107;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .shift-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .shop-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: #dbdee4;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-upcoming {
            background: #e3f2fd;
            color: #1976d2;
        }

        .status-completed {
            background: #e8f5e8;
            color: #2e7d32;
        }

        .status-active {
            background: #fff3e0;
            color: #f57c00;
        }

        .shift-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
            color: #c4c9c4
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .detail-icon {
            width: 20px;
            height: 20px;
            opacity: 0.7;
        }

        .detail-label {
            font-weight: 600;
            color: #cbcccf;
            margin-right: 4px;
        }

        .detail-value {
            color: #fcfcfc;
        }

        .earnings {
            font-size: 1.2rem;
            font-weight: 700;
            color: #97ddb8;
        }

        .progress-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .progress-text {
            font-weight: 600;
            color: #ccd0d8;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #a09e2c, #c4c10d);
            transition: width 0.5s ease;
            border-radius: 6px;
        }

        .current-time {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 12px 20px;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            font-weight: 600;
            color: #c2c4c9;
            font-size: 1.1rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .shift-details {
                grid-template-columns: 1fr;
            }
            
            .shift-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .current-time {
                position: static;
                margin-bottom: 20px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="current-time" id="currentTime"></div>
    
    <div class="container">
        <div class="header">
            <h1>Work Shifts</h1>
            <p>Track your shifts and earnings</p>
        </div>
        
        <div id="shiftsContainer"></div>
    </div>

    <script>
    // Shift data - edit this array to add/modify shifts
    const shifts = [
        {
            shop: "Castle Street",
            date: "2025-09-13",
            startTime: "10:00",
            endTime: "16:00"
        },
        {
            shop: "Castle Street",
            date: "2025-09-14",
            startTime: "11:00",
            endTime: "16:00"
        },
    ];

    const hourlyRate = 8.12;

    function calculateBreakTime(totalMinutes) {
        const hours = totalMinutes / 60;
        if (hours >= 2 && hours < 4) return 15;
        if (hours >= 4 && hours < 6) return 30;
        if (hours >= 6) return 60;
        return 0;
    }

    function calculateEarnings(startTime, endTime, date) {
        const start = new Date(`${date}T${startTime}`);
        const end = new Date(`${date}T${endTime}`);
        const totalMinutes = (end - start) / (1000 * 60);
        const breakMinutes = calculateBreakTime(totalMinutes);
        const workingMinutes = totalMinutes - breakMinutes;
        const workingHours = workingMinutes / 60;

        return {
            totalHours: Math.round(workingHours * 10) / 10,
            earnings: Math.round(workingHours * hourlyRate * 100) / 100,
            breakMinutes: breakMinutes
        };
    }

    function getShiftStatus(date, startTime, endTime) {
        const now = new Date();
        const shiftStart = new Date(`${date}T${startTime}`);
        const shiftEnd = new Date(`${date}T${endTime}`);
        if (now >= shiftEnd) return 'completed';
        if (now >= shiftStart && now < shiftEnd) return 'active';
        return 'upcoming';
    }

    function calculateProgress(date, startTime, endTime) {
        const now = new Date();
        const shiftStart = new Date(`${date}T${startTime}:00`);
        const shiftEnd = new Date(`${date}T${endTime}:00`);

        if (shiftEnd < shiftStart) shiftEnd.setDate(shiftEnd.getDate() + 1);

        if (now < shiftStart) return { progress: 0, hoursWorked: 0, currentEarnings: 0 };
        if (now >= shiftEnd) return { progress: 100, hoursWorked: 0, currentEarnings: 0 };

        const totalMinutes = (shiftEnd - shiftStart) / (1000 * 60);
        const elapsedMinutes = (now - shiftStart) / (1000 * 60);
        const progress = (elapsedMinutes / totalMinutes) * 100;

        const breakMinutes = calculateBreakTime(elapsedMinutes);
        const workingMinutes = Math.max(0, elapsedMinutes - breakMinutes);
        const hoursWorked = Math.round((workingMinutes / 60) * 10) / 10;
        const currentEarnings = Math.round(hoursWorked * hourlyRate * 100) / 100;

        return { progress, hoursWorked, currentEarnings };
    }

    function formatTime(timeString) {
        const [hours, minutes] = timeString.split(':');
        const hour = parseInt(hours);
        const period = hour >= 12 ? 'PM' : 'AM';
        const displayHour = hour === 0 ? 12 : hour > 12 ? hour - 12 : hour;
        return `${displayHour}:${minutes} ${period}`;
    }

    function formatDate(dateString) {
        const date = new Date(dateString);
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        return date.toLocaleDateString('en-GB', options);
    }

    let sortedShifts = []; // keep global sorted copy

    function renderShifts() {
        const container = document.getElementById('shiftsContainer');
        sortedShifts = shifts.sort((a, b) => new Date(a.date) - new Date(b.date));

        container.innerHTML = sortedShifts.map((shift, index) => {
            const earnings = calculateEarnings(shift.startTime, shift.endTime, shift.date);
            const status = getShiftStatus(shift.date, shift.startTime, shift.endTime);
            const progress = calculateProgress(shift.date, shift.startTime, shift.endTime);

            const statusLabels = {
                'upcoming': 'Upcoming',
                'active': 'In Progress',
                'completed': 'Completed'
            };

            return `
                <div class="shift-card ${status}" data-shift-index="${index}">
                    <div class="shift-header">
                        <div class="shop-name">${shift.shop}</div>
                        <div class="status-badge status-${status}">${statusLabels[status]}</div>
                    </div>
                    
                    <div class="shift-details">
                        <div class="detail-item">
                            <span class="detail-label">📅 Date:</span>
                            <span class="detail-value">${formatDate(shift.date)}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">🕒 Time:</span>
                            <span class="detail-value">${formatTime(shift.startTime)} - ${formatTime(shift.endTime)}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">⏱️ Hours:</span>
                            <span class="detail-value">${earnings.totalHours}h (${earnings.breakMinutes}min break)</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">💰 Earnings:</span>
                            <span class="detail-value earnings">£${earnings.earnings.toFixed(2)}</span>
                        </div>
                    </div>
                    
                    ${status === 'active' ? `
                        <div class="progress-section">
                            <div class="progress-header">
                                <span class="progress-text" data-progress-text="true">Progress: ${progress.hoursWorked}h worked</span>
                                <span class="progress-text" data-earnings-text="true">£${progress.currentEarnings.toFixed(2)} earned</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress-fill="true" style="width: ${progress.progress}%"></div>
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
        }).join('');
    }

    function updateActiveShifts() {
        sortedShifts.forEach((shift, index) => {
            const shiftCard = document.querySelector(`[data-shift-index="${index}"]`);
            if (!shiftCard) return;
            const currentStatus = getShiftStatus(shift.date, shift.startTime, shift.endTime);
                const progress = calculateProgress(shift.date, shift.startTime, shift.endTime);
                
                // Update card classes if status changed
                const cardClasses = ['upcoming', 'active', 'completed'];
                cardClasses.forEach(cls => shiftCard.classList.remove(cls));
                shiftCard.classList.add(currentStatus);
                
                // Apply shop-specific styling based on current status
                let shopStyle = '';
                if (shift.shop === "Castle Street") {
                    if (currentStatus === 'completed') {
                        shopStyle = 'background: linear-gradient(135deg, #ffffff 0%, #c8e6c9 100%); border-color: #1976d2;';
                    } else if (currentStatus === 'active') {
                        shopStyle = 'background: linear-gradient(135deg, #807432 0%, #615515 100%); border-color: #1976d2;';
                    } else {
                        shopStyle = 'background: linear-gradient(135deg, #879fc4 0%, #4a6ea8 100%); border-color: #1976d2;';
                    }
                } else if (shift.shop === "Strand Street") {
                    if (currentStatus === 'completed') {
                        shopStyle = 'background: linear-gradient(135deg, #ffffff 0%, #c8e6c9 100%); border-color: #d32f2f;';
                    } else if (currentStatus === 'active') {
                        shopStyle = 'background: linear-gradient(135deg, #807432 0%, #615515 100%); border-color: #d32f2f;';
                    } else {
                        shopStyle = 'background: linear-gradient(135deg, #d69898 0%, #c96161 100%); border-color: #d32f2f;';
                    }
                }
                shiftCard.style.cssText = shopStyle;
                
                // Update status badge
                const statusBadge = shiftCard.querySelector('.status-badge');
                if (statusBadge) {
                    const statusLabels = {
                        'upcoming': 'Upcoming',
                        'active': 'In Progress',
                        'completed': 'Completed'
                    };
                    statusBadge.textContent = statusLabels[currentStatus];
                    statusBadge.className = `status-badge status-${currentStatus}`;
                }
                
                // Update progress section for active shifts
                if (currentStatus === 'active') {
                    const progressText = shiftCard.querySelector('[data-progress-text]');
                    const earningsText = shiftCard.querySelector('[data-earnings-text]');
                    const progressFill = shiftCard.querySelector('[data-progress-fill]');
                    
                    if (progressText) progressText.textContent = `Progress: ${progress.hoursWorked}h worked`;
                    if (earningsText) earningsText.textContent = `£${progress.currentEarnings.toFixed(2)} earned`;
                    if (progressFill) progressFill.style.width = `${progress.progress}%`;
                    
                    // Add progress section if it doesn't exist
                    if (!shiftCard.querySelector('.progress-section')) {
                        const earnings = calculateEarnings(shift.startTime, shift.endTime, shift.date);
                        const progressSection = document.createElement('div');
                        progressSection.className = 'progress-section';
                        progressSection.innerHTML = `
                            <div class="progress-header">
                                <span class="progress-text" data-progress-text="true">Progress: ${progress.hoursWorked}h worked</span>
                                <span class="progress-text" data-earnings-text="true">£${progress.currentEarnings.toFixed(2)} earned</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress-fill="true" style="width: ${progress.progress}%"></div>
                            </div>
                        `;
                        shiftCard.appendChild(progressSection);
                    }
                } else {
                    // Remove progress section if shift is no longer active
                    const progressSection = shiftCard.querySelector('.progress-section');
                    if (progressSection) {
                        progressSection.remove();
                    }
                }
            });
        }

    function updateCurrentTime() {
        const now = new Date();
        const timeString = now.toLocaleString('en-GB', {
            weekday: 'short',
            year: 'numeric',
            month: 'short',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit'
        });
        document.getElementById('currentTime').textContent = timeString;
    }

    // init
    renderShifts();
    updateCurrentTime();
    setInterval(() => {
        updateActiveShifts();
        updateCurrentTime();
    }, 1000);
</script>
</body> 

</html>





